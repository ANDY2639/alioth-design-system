#!/usr/bin/env sh

echo 'ğŸš€ Running pre-push validations...'

# Clean .next folder using rimraf (cross-platform)
echo 'ğŸ§¹ Cleaning .next folder...'
pnpm rimraf .next

# Run TypeScript type checking
echo 'ğŸ” Checking TypeScript types...'
pnpm check:types || {
  echo 'âŒ Type check failed. Push aborted.'
  exit 1
}

# Run ESLint
echo 'ğŸ§¹ Running ESLint...'
pnpm check:lint || {
  echo 'âŒ Lint check failed. Push aborted.'
  exit 1
}

# Check formatting
echo 'ğŸ¨ Checking code formatting...'
pnpm check:format || {
  echo 'âŒ Format check failed. Run "pnpm format" to fix. Push aborted.'
  exit 1
}

echo 'âœ… All validations passed! Pushing...'
